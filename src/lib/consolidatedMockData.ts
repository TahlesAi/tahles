
export const consolidatedProviders = [
  {
    id: "provider-001",
    name: "נטע ברסלר - אומני החושים",
    businessName: "נטע ברסלר - אומני החושים",
    description: "אומן חושים מקצועי המתמחה בקריאת מחשבות ואשליות מרהיבות לכל סוגי האירועים",
    categories: ["cat-008"],
    contactPerson: "נטע ברסלר",
    contact_person: "נטע ברסלר",
    email: "neta@example.com",
    contact_email: "neta@example.com",
    phone: "050-1234567",
    contact_phone: "050-1234567",
    rating: 4.9,
    reviewCount: 156,
    review_count: 156,
    featured: true,
    verified: true,
    is_verified: true,
    calendarActive: true,
    address: "תל אביב",
    city: "תל אביב",
    logo: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",
    logo_url: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",
    specialties: ["קריאת מחשבות", "אשליות", "מנטליזם"],
    yearsExperience: 8,
    gallery: []
  },
  {
    id: "provider-002", 
    name: "להקת הזמר דני כהן",
    businessName: "להקת הזמר דני כהן",
    description: "להקה מקצועית לאירועים פרטיים ועסקיים עם רפרטואר מגוון",
    categories: ["cat-001"],
    contactPerson: "דני כהן",
    contact_person: "דני כהן",
    email: "danny@example.com",
    contact_email: "danny@example.com",
    phone: "050-2345678",
    contact_phone: "050-2345678",
    rating: 4.7,
    reviewCount: 89,
    review_count: 89,
    featured: true,
    verified: true,
    is_verified: true,
    calendarActive: true,
    address: "ירושלים",
    city: "ירושלים",
    logo: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=150&h=150&fit=crop&crop=face",
    logo_url: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=150&h=150&fit=crop&crop=face",
    specialties: ["מוזיקה עברית", "מוזיקה עולמית", "שירה חיה"],
    yearsExperience: 12,
    gallery: []
  },
  {
    id: "provider-003",
    name: "סטודיו לצילום אירועים - אורן כהן",
    businessName: "סטודיו לצילום אירועים - אורן כהן",
    description: "צילום מקצועי לאירועים פרטיים ועסקיים עם דגש על רגעים מיוחדים",
    categories: ["cat-005"],
    contactPerson: "אורן כהן",
    contact_person: "אורן כהן",
    email: "oren@example.com",
    contact_email: "oren@example.com",
    phone: "050-3456789",
    contact_phone: "050-3456789",
    rating: 4.8,
    reviewCount: 102,
    review_count: 102,
    featured: false,
    verified: true,
    is_verified: true,
    calendarActive: false,
    address: "חיפה",
    city: "חיפה",
    logo: "https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=150&h=150&fit=crop&crop=face",
    logo_url: "https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=150&h=150&fit=crop&crop=face",
    specialties: ["צילום סטילס", "צילום וידאו", "עריכת תמונות"],
    yearsExperience: 10,
    gallery: []
  },
  {
    id: "provider-004",
    name: "קייטרינג גורמה - טעם של פעם",
    businessName: "קייטרינג גורמה - טעם של פעם",
    description: "קייטרינג איכותי עם מגוון מנות גורמה לאירועים קטנים וגדולים",
    categories: ["cat-010"],
    contactPerson: "רונית לוי",
    contact_person: "רונית לוי",
    email: "ronit@example.com",
    contact_email: "ronit@example.com",
    phone: "050-4567890",
    contact_phone: "050-4567890",
    rating: 4.6,
    reviewCount: 75,
    review_count: 75,
    featured: true,
    verified: false,
    is_verified: false,
    calendarActive: true,
    address: "ראשון לציון",
    city: "ראשון לציון",
    logo: "https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=150&h=150&fit=crop&crop=face",
    logo_url: "https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=150&h=150&fit=crop&crop=face",
    specialties: ["מנות גורמה", "קייטרינג חלבי", "קייטרינג בשרי"],
    yearsExperience: 15,
    gallery: []
  },
  {
    id: "provider-005",
    name: "DJ אלי - מוסיקה לאירועים",
    businessName: "DJ אלי - מוסיקה לאירועים",
    description: "די ג'יי מקצועי עם ניסיון רב במוסיקה לאירועים פרטיים ועסקיים",
    categories: ["cat-001"],
    contactPerson: "אלי כהן",
    contact_person: "אלי כהן",
    email: "eli@example.com",
    contact_email: "eli@example.com",
    phone: "050-5678901",
    contact_phone: "050-5678901",
    rating: 4.5,
    reviewCount: 120,
    review_count: 120,
    featured: false,
    verified: true,
    is_verified: true,
    calendarActive: true,
    address: "בת ים",
    city: "בת ים",
    logo: "https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=150&h=150&fit=crop&crop=face",
    logo_url: "https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=150&h=150&fit=crop&crop=face",
    specialties: ["מוסיקה אלקטרונית", "מוסיקה לטקסים", "הגברה ותאורה"],
    yearsExperience: 7,
    gallery: []
  }
];

export const consolidatedProducts = [
  {
    id: "product-001",
    providerId: "provider-001",
    name: "מופע קריאת מחשבות מרהיב",
    description: "מופע אינטראקטיבי של קריאת מחשבות ומנטליזם שיכבוש את הקהל",
    price: 2500,
    priceUnit: "לאירוע",
    categoryId: "cat-008",
    subcategoryId: "subcat-008-001",
    imageUrl: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400&h=300&fit=crop",
    rating: 4.9,
    reviewCount: 45,
    featured: true,
    available: true,
    duration: 45,
    audienceSize: { min: 20, max: 200, optimal: 80 },
    isReceptionService: false,
    tags: ["מנטליזם", "קריאת מחשבות", "בידור"],
    suitableFor: ["אירועי חברה", "בר מצווה", "חתונות"],
    additionalImages: [],
    videos: [],
    technicalRequirements: ["מיקרופון", "במה"],
    setupTime: 30,
    features: ["אינטראקטיבי", "מתאים לכל הגילאים"]
  },
  {
    id: "product-002",
    providerId: "provider-002",
    name: "מופע מוזיקלי חיווי",
    description: "מופע מוזיקלי עם שירה חיה ורפרטואר מגוון",
    price: 3500,
    priceUnit: "לאירוע",
    categoryId: "cat-001",
    subcategoryId: "subcat-001-001",
    imageUrl: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop",
    rating: 4.7,
    reviewCount: 38,
    featured: true,
    available: true,
    duration: 60,
    audienceSize: { min: 30, max: 300, optimal: 100 },
    isReceptionService: false,
    tags: ["מוזיקה", "שירה חיה", "להקה"],
    suitableFor: ["חתונות", "אירועי חברה", "חגיגות"],
    additionalImages: [],
    videos: [],
    technicalRequirements: ["מערכת הגברה", "חשמל"],
    setupTime: 45,
    features: ["רפרטואר מגוון", "שירה חיה"]
  },
  {
    id: "product-003",
    providerId: "provider-003",
    name: "צילום אירועים מקצועי",
    description: "צילום מקצועי לאירועים עם דגש על רגעים מיוחדים",
    price: 2800,
    priceUnit: "לאירוע",
    categoryId: "cat-005",
    subcategoryId: "subcat-005-001",
    imageUrl: "https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=400&h=300&fit=crop",
    rating: 4.8,
    reviewCount: 52,
    featured: false,
    available: true,
    duration: 240,
    audienceSize: { min: 10, max: 500, optimal: 150 },
    isReceptionService: true,
    tags: ["צילום", "וידאו", "זיכרונות"],
    suitableFor: ["חתונות", "בר מצווה", "אירועי חברה"],
    additionalImages: [],
    videos: [],
    technicalRequirements: ["גישה לחשמל"],
    setupTime: 15,
    features: ["צילום דיגיטלי", "עריכה מקצועית"]
  }
];

export const consolidatedCalendars = [
  {
    providerId: "provider-001",
    slots: [
      {
        date: "2024-02-15",
        startTime: "19:00",
        endTime: "22:00",
        isAvailable: true,
        maxBookings: 1,
        currentBookings: 0
      },
      {
        date: "2024-02-20",
        startTime: "20:00",
        endTime: "23:00",
        isAvailable: true,
        maxBookings: 1,
        currentBookings: 0
      }
    ]
  },
  {
    providerId: "provider-002",
    slots: [
      {
        date: "2024-02-16",
        startTime: "19:30",
        endTime: "22:30",
        isAvailable: true,
        maxBookings: 1,
        currentBookings: 0
      }
    ]
  }
];

export const getAvailableProductsForDate = (date: string, time?: string) => {
  const availableProviderIds = consolidatedCalendars
    .filter(calendar => {
      return calendar.slots.some(slot => {
        const isDateMatch = slot.date === date;
        const isTimeMatch = !time || slot.startTime <= time;
        const isSlotAvailable = slot.isAvailable && slot.currentBookings < slot.maxBookings;
        
        return isDateMatch && isTimeMatch && isSlotAvailable;
      });
    })
    .map(calendar => calendar.providerId);

  return consolidatedProducts.filter(product => 
    product.available && 
    availableProviderIds.includes(product.providerId)
  );
};

export const getProductsByCategory = (categoryId: string) => {
  return consolidatedProducts.filter(product => 
    product.categoryId === categoryId && product.available
  );
};

export const getProductsBySubcategory = (subcategoryId: string) => {
  return consolidatedProducts.filter(product => 
    product.subcategoryId === subcategoryId && product.available
  );
};

export const validateDataIntegrity = () => {
  const issues: string[] = [];
  
  // בדיקת מוצרים עם ספקים שלא קיימים
  consolidatedProducts.forEach(product => {
    const provider = consolidatedProviders.find(p => p.id === product.providerId);
    if (!provider) {
      issues.push(`מוצר ${product.name} משויך לספק שלא קיים: ${product.providerId}`);
    }
  });
  
  // בדיקת ספקים פעילים ללא יומן
  consolidatedProviders.forEach(provider => {
    if (provider.calendarActive) {
      const calendar = consolidatedCalendars.find(c => c.providerId === provider.id);
      if (!calendar) {
        issues.push(`ספק פעיל ${provider.name} ללא יומן זמינות`);
      }
    }
  });
  
  // בדיקת מוצרים ללא קטגוריה
  consolidatedProducts.forEach(product => {
    if (!product.categoryId) {
      issues.push(`מוצר ${product.name} ללא קטגוריה`);
    }
  });
  
  return {
    isValid: issues.length === 0,
    issues,
    stats: {
      totalProviders: consolidatedProviders.length,
      totalProducts: consolidatedProducts.length,
      totalCalendars: consolidatedCalendars.length
    }
  };
};
